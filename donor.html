<!DOCTYPE html>
<html>
<head>
    <title>Become a Donor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="navbar">
    <div class="menu">â˜°</div>
    <div class="logo">BloodConnect</div>
    <div class="nav-links">
        <a href="/">Home</a>
        <a href="/request">Request</a>
    </div>
</div>

<div class="card">
    <h2>Become a Life Saver</h2>

    <input placeholder="Full Name" id="name">
    <select id="blood">
    <option value="">Select Blood Group</option>
    <option value="A+">A+</option>
    <option value="A-">A-</option>
    <option value="B+">B+</option>
    <option value="B-">B-</option>
    <option value="O+">O+</option>
    <option value="O-">O-</option>
    <option value="AB+">AB+</option>
    <option value="AB-">AB-</option>
    </select>

    <input placeholder="Phone Number" id="phone">
    <input placeholder="Location" id="location">
    <input placeholder="Last Donated Date (YYYY-MM-DD)" id="date">

    <button onclick="register()">Join as Donor</button>

    <h4 id="msg"></h4>
</div>

<script>
function register(){

    const name = document.getElementById("name");
    const blood = document.getElementById("blood");
    const phone = document.getElementById("phone");
    const location = document.getElementById("location");
    const date = document.getElementById("date");
    const msg = document.getElementById("msg");

    fetch('/addDonor',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({
            name: name.value,
            blood: blood.value,
            phone: phone.value,
            location: location.value,
            last_donated: date.value
        })
    })
    .then(res => res.json())
    .then(data => {
        msg.innerHTML = data.msg;
    })
    .catch(error => {
        msg.innerHTML = "Something went wrong!";
        console.log(error);
    });
}
</script>


</body>
</html>
